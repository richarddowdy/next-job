import axios from "axios";
import { useState, useEffect } from "react";
import CompaniesList from "../../components/company/CompaniesList";
import API from "../../API";

export default function CompanyPage() {
  const [companies, setCompanies] = useState([]);
  const [companyCount, setCompanyCount] = useState(null);

  useEffect(() => {
    if (!companies.length) {
      const fetchCompanies = async () => {
        const companies = await API.getCompanies();
        const companyCount = await API.getCompanyCount(); // this could probably be included in the above api call;
        // console.log(companies);
        setCompanies(companies);
        setCompanyCount(companyCount);
      };
      fetchCompanies();
    }
  }, []);

  return (
    <>
      <div>
        <img
          style={{ width: "100%" }}
          src="data:image/jpeg;base64,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"
        />
      </div>
      <h1 className="text-center m-5">This is the compaies page</h1>
      <div style={{ height: 100 }}></div>
      <p>Total Company Count: {companyCount}</p>
      <div className="d-flex flex-wrap justify-content-around">
        <CompaniesList companies={companies} />
      </div>
    </>
  );
}
